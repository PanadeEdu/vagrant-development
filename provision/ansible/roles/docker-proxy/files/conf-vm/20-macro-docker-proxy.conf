<Macro DockerProxy $project $port>
  <VirtualHost *:80>
    ServerName   $project.vm.dev
    ServerAlias  $project.vm
    ServerAlias  *.$project.vm.dev
    ServerAlias  *.$project.vm

    Use ProxyPass / http://127.0.0.1:$port/
  </VirtualHost>
</Macro>

<Macro DockerProxySSL $project $port>
  <VirtualHost *:443>
    ServerName   $project.vm.dev
    ServerAlias  $project.vm
    ServerAlias  *.$project.vm.dev
    ServerAlias  *.$project.vm

    Use ProxyPassSSL / https://127.0.0.1:$port/
    Use SSL
  </VirtualHost>
</Macro>



<Macro DockerProxyFallback $port>
  <VirtualHost *:80>
    ServerName   docker-fallback.vm.dev
    ServerAlias  *.vm

    Use ProxyPass / http://127.0.0.1:$port/
  </VirtualHost>
</Macro>

<Macro DockerProxyFallbackSSL $port>
  <VirtualHost *:443>
    ServerName   docker-fallback.vm.dev
    ServerAlias  *.vm

    Use ProxyPassSSL / https://127.0.0.1:$port/
    Use SSL
  </VirtualHost>
</Macro>



<Macro DockerProxySolr $project $port>
  <VirtualHost *:80>
    ServerName   $project.vm.dev
    ServerAlias  $project.vm

    Use ProxyPass /solr/ http://127.0.0.1:$port/solr/
    Redirect /    /solr/
  </VirtualHost>
</Macro>
